<div class="container" id="main-container" style="background-color: white">
  <div class="row" style="margin-bottom: 20px;">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <!-- (click)="onOpenModal(null,'add')" -->
        <a
          class="nav-link"
          (click)="onOpenModalAdd(null, 'add')"
          style="color: rgb(253, 252, 252); background-color: rgb(68, 123, 182)"
          >&nbsp;<i class="fa fa-plus"></i>&nbsp; Add Hotel &nbsp;
          <span class="sr-only">(current)</span></a
        >
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <a
        class="nav-link"
        routerLink="/searchRoom"
        style="color: rgb(47, 26, 26); background-color: rgb(152, 182, 68)"
        >&nbsp; Check Room Availability &nbsp;
        <span class="sr-only">(current)</span></a
      >
    </form>
    &nbsp; &nbsp;
    <form class="form-inline my-2 my-lg-0">
      <input
        type="search"
        (ngModelChange)="searchHotel(key.value)"
        #key="ngModel"
        ngModel
        name="key"
        id="searchName"
        class="form-control mr-sm-2"
        placeholder="Search Hotel..."
        required
      />
    </form>
  </div>

  <!-- <div *ngFor="let hotel of hotels" class="col-10"> -->
  <!-- <table class="table">
    <thead>
      <tr>
        <th scope="col">HotelID</th>
        <th scope="col">Hotel Name</th>
        <th scope="col">City</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Hotel INFO</th>
      </tr>
    </thead>
    <tbody
      *ngFor="
        let hotel of hotels | paginate : { itemsPerPage: 10, currentPage: page }
      "
    >
      <tr>
        <th scope="row">{{ hotel?.hotelId }}</th>
        <td>{{ hotel?.hotelName }}</td>
        <td>{{ hotel?.city }}</td>
        <td>{{ hotel?.phoneNumber }}</td>
        <td
          class="btn btn-secondary tooltips"
          data-placement="top"
          data-original-title="Rooms"
          routerLink="/room/{{ hotel.hotelId }}"
          style="background-color: rgb(228, 119, 56)"
        >
          <i class="fa fa-eye">&nbsp; &nbsp; Rooms</i>
        </td>

        <td
          routerLink="/contract/{{ hotel.hotelId }}"
          class="btn btn-primary tooltips"
          data-placement="top"
          data-original-title="Contract"
          style="background-color: darkblue"
        >
          <i class="fa fa-book">&nbsp; &nbsp; Contracts</i>
        </td>
        <td
          (click)="onOpenModal(hotel, 'edit')"
          class="btn btn-primary tooltips"
          data-placement="top"
          data-original-title="Edit"
          style="background-color: rgb(9, 65, 14)"
        >
          <i class="fa fa-pencil">&nbsp; &nbsp; Edit Hotel</i>
        </td>
        <td
          (click)="onOpenModal(hotel, 'delete')"
          class="btn btn-secondary tooltips"
          data-placement="top"
          data-original-title="Delete"
          style="background-color: red"
        >
          <i class="fa fa-times">&nbsp; &nbsp; Delete Hotel</i>
        </td>
      </tr>
    </tbody>
  </table> -->

  <!-- <div class="card-deck">
    <div class="card" *ngFor="let hotel of hotels | paginate: { itemsPerPage: 2, currentPage: page }">
      <img class="card-img-top" src="assets/home.jpg" alt="Hotel Image"> 
      <div class="card-body">
        <h5 class="card-title">{{ hotel?.hotelName }}</h5>
        <p class="card-text">{{ hotel?.city }}</p>
        <p class="card-text">{{ hotel?.phoneNumber }}</p>
      </div>
      <div class="card-footer">
        <a href="/room/{{ hotel.hotelId }}" class="btn btn-secondary" style="background-color: rgb(228, 119, 56)">
          <i class="fa fa-eye"></i> Rooms
        </a>
        <a href="/contract/{{ hotel.hotelId }}" class="btn btn-primary" style="background-color: darkblue">
          <i class="fa fa-book"></i> Contracts
        </a>
        <button (click)="onOpenModal(hotel, 'edit')" class="btn btn-primary" style="background-color: rgb(9, 65, 14)">
          <i class="fa fa-pencil"></i> Edit Hotel
        </button>
        <button (click)="onOpenModal(hotel, 'delete')" class="btn btn-secondary" style="background-color: red">
          <i class="fa fa-times"></i> Delete Hotel
        </button>
      </div>
    </div>
  </div> -->

  <!-- <div class="row">
    <div class="col-md-4 col-lg-4" *ngFor="let hotel of hotels | paginate: { itemsPerPage: 12, currentPage: page }">
      <div class="card mb-4">
        <img class="card-img-top" [src]="getRandomImage()" alt="Hotel Image">
        <div class="card-body">
          <h5 class="card-title">{{ hotel?.hotelName }}</h5>
          <p class="card-text">{{ hotel?.city }}</p>
          <p class="card-text">TP: {{ hotel?.phoneNumber }}</p>
        </div>
        <div class="card-footer">
          <a href="/room/{{ hotel.hotelId }}" class="btn btn-secondary" style="background-color: rgb(228, 119, 56)">
            <i class="fa fa-bed"></i> Rooms
          </a>
          <a href="/contract/{{ hotel.hotelId }}" class="btn btn-primary mr-3" style="background-color: darkblue">
            <i class="fa fa-book"></i> Contracts
          </a>
          <button (click)="onOpenModal(hotel, 'edit')" class="btn btn-primary" style="background-color: rgb(9, 65, 14)">
            <i class="fa fa-pencil"></i>
          </button>
          <button (click)="onOpenModal(hotel, 'delete')" class="btn btn-secondary" style="background-color: red">
            <i class="fa fa-trash"></i> 
          </button>
        </div>
      </div>
    </div>
  </div>
  
  

  <div class="pagination-controls">
    <pagination-controls (pageChange)="page = $event"> </pagination-controls>
  </div> -->

  <div class="row">
    <div class="col-md-4 col-lg-4" *ngFor="let hotel of hotels ">
      <div class="card mb-4">
        <img class="card-img-top" [src]="getRandomImage()" alt="Hotel Image">
        <div class="card-body">
          <h5 class="card-title">{{ hotel?.hotelName }}</h5>
          <p class="card-text">{{ hotel?.city }}</p>
          <p class="card-text">TP: {{ hotel?.phoneNumber }}</p>
        </div>
        <div class="card-footer">
          <a href="/room/{{ hotel.hotelId }}" class="btn btn-secondary" style="background-color: rgb(228, 119, 56)">
            <i class="fa fa-bed"></i> Rooms
          </a>
          <a href="/contract/{{ hotel.hotelId }}" class="btn btn-primary mr-3" style="background-color: darkblue">
            <i class="fa fa-book"></i> Contracts
          </a>
          <button (click)="onOpenModal(hotel, 'edit')" class="btn btn-primary" style="background-color: rgb(9, 65, 14)">
            <i class="fa fa-pencil"></i>
          </button>
          <button (click)="onOpenModal(hotel, 'delete')" class="btn btn-secondary" style="background-color: red">
            <i class="fa fa-trash"></i> 
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="pagination">
    <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>
  
  <!-- <div class="pagination">
    <pagination-controls
      (pageChange)="currentPage = $event"
      [id]="'hotelPagination'"
      [previousLabel]="'Previous'"
      [nextLabel]="'Next'"
      [maxSize]="5"
      
      [directionLinks]="true"
      [responsive]="true"
      
      [(ngModel)]="currentPage"
    ></pagination-controls>
  </div> -->


  <router-outlet></router-outlet>
  <div>
    <app-footer></app-footer>
  </div>
  
</div>

<!-- Add hotel Modal -->
<div
  class="modal fade"
  id="addHotelModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addHotelModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addHotelModalLabel">Add Hotel</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #addForm="ngForm" (ngSubmit)="onAddHotel(addForm)">
          <div class="form-group">
            <label for="hotelName">Name</label>
            <input
              type="text"
              ngModel
              name="hotelName"
              class="form-control"
              id="hotelName"
              placeholder="Name"
              required
            />
            <!-- <div class="invalid-feedback" *ngIf="hotelName.invalid">
              Name is required.
            </div> -->
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <input
              type="text"
              ngModel
              name="city"
              class="form-control"
              id="city"
              placeholder="City"
              required
            />
          </div>

          <div class="form-group">
            <label for="phoneNumber">Phone Number</label>
            <input
              type="text"
              ngModel
              name="phoneNumber"
              class="form-control"
              id="phoneNumber"
              placeholder="phoneNumber"
              required
            />
          </div>
          <div *ngIf="addForm.invalid && addForm.dirty" class="error-message">
            **Please fill in all the fields.
          </div>
          <div class="modal-footer">
            <button
              [disabled]="addForm.invalid"
              type="submit"
              class="btn btn-primary"
            >
              Save changes
            </button>

            <button
              type="button"
              id="add-hotel-form"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div
  class="modal fade"
  id="updateHotelModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="hotelEditModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="updateHotelModalLabel">
          Edit Hotel {{ editHotel?.hotelName }}
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #editForm="ngForm">
          <div class="form-group">
            <label for="hotelName">Name</label>
            <input
              type="text"
              ngModel="{{ editHotel?.hotelName }}"
              name="hotelName"
              class="form-control"
              id="hotelName"
              aria-describedby="emailHelp"
              placeholder="Name"
            />
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <input
              type="text"
              ngModel="{{ editHotel?.city }}"
              name="city"
              class="form-control"
              id="city"
              placeholder="city"
            />
          </div>

          <div class="form-group">
            <label for="phoneNumber">phoneNumber</label>
            <input
              type="text"
              ngModel="{{ editHotel?.phoneNumber }}"
              name="phoneNumber"
              class="form-control"
              id="phoneNumber"
              placeholder="phoneNumber"
            />
          </div>

          <div class="modal-footer">
            <button
              type="button"
              id=""
              data-dismiss="modal"
              class="btn btn-secondary"
            >
              Close
            </button>
            <button
              (click)="onUpdateHotel(editForm.value, editHotel.hotelId)"
              data-dismiss="modal"
              class="btn btn-primary"
            >
              Save changes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div
  class="modal fade"
  id="deleteHotelModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="deleteModelLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModelLabel">Delete Hotel</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>
          Are you sure you want to delete hotel {{ deleteHotel?.hotelName }}?
        </p>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            No
          </button>
          <button
            (click)="onDeleteHotel(deleteHotel.hotelId)"
            class="btn btn-danger"
            data-dismiss="modal"
          >
            Yes
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- </div> -->

<!-- Notification for no employees -->
<div *ngIf="hotels?.length == 0" class="col-lg-12 col-md-12 col-xl-12">
  <div class="alert alert-info" role="alert">
    <h4 class="alert-heading">NO HOTELS!</h4>
    <p>No hotels were found.</p>
  </div>
</div>
